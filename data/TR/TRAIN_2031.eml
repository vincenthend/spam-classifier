{'body': "On May 5, 2010, at 9:12 PM, ext Dominic Giampaolo wrote:\r\n\r\n>> - I create a FSEventStream with the right directories to watch\r\n>> - if the user adds or removes a directory, I delete the current FSEventS=\r\ntream and create a new one with the right values\r\n>>=20\r\n> Are you sure that you're properly tearing down and\r\n> releasing the old FSEvent stream before creating=20\r\n> the new one?=20\r\n>=20\r\n\r\nYes, I am sure of that.\r\nI printed all the steps on the output to check:\r\n\r\n# Create stream=20\r\n## Schedule stream=20\r\n### Start stream=20\r\n[stuff happens]\r\n#### Stop stream=20\r\n##### Invalidate stream=20\r\n###### Release stream=20\r\n# Create stream=20\r\n## Schedule stream=20\r\n### Start stream=20\r\n[...]\r\n#### Stop stream=20\r\n##### Invalidate stream=20\r\n###### Release stream=20\r\n\r\nI don't unschedule the stream from the run loop since I invalidate it.\r\n\r\n> Also, is it possible that one FSEventStream gets=20\r\n> deleted on one thread and another is created on\r\n> another thread at the same time?  Can you see if\r\n> putting all FSEventStream creation/deletion on=20\r\n> the same thread makes the problem go away?\r\n>=20\r\n\r\n\r\nAll the stream related stuff is happening on the same thread (at least for =\r\nnow).\r\nPlus, in my example, I don't create a new stream after deleting the first o=\r\nne (since I have nothing left to watch).\r\n\r\nIt seems to me the stream may not be properly closed, or it is trying to ac=\r\ncess something that doesn't exist anymore.\r\nBut I am following all the steps for properly stopping and releasing the st=\r\nream.\r\n\r\n--=20\r\nFabien Freling\r\nSoftware Engineer, Platform team\r\nNokia, Qt Development Frameworks\r\n\r\n _______________________________________________\r\nDo not post admin requests to the list. They will be ignored.\r\nFilesystem-dev mailing list      (Filesystem-dev@lists.apple.com)\r\nHelp/Unsubscribe/Update your Subscription:\r\nhttp://lists.apple.com/mailman/options/filesystem-dev/mlsubscriber.tech%40csmining.org\r\n\r\nThis email sent to mlsubscriber.tech@csmining.org\r\n\r\n", 'subject': 'Re: FSEvents errors after the removal of a watched directory'}