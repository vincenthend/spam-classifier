{'body': 'On Wed, Apr 28, 2010 at 7:50 AM, Siju George <sgeorge.ml@csmining.org> wrote:\r\n>\r\n> I have installed\r\n> ii =A0samba =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =\r\n=A0 2:3.2.5-4lenny9 =A0 =A0 =A0 =A0 =A0 =A0a\r\n> ii =A0samba-common =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A02:3=\r\n.2.5-4lenny9\r\n> On Debian Lenny and i am sharing directories to Windows Users successfull=\r\ny.\r\n>\r\n> I configured it as a PDC with the following configuration.\r\n> [global]\r\n> =A0 =A0 =A0 =A0workgroup =3D HIFXNX\r\n> =A0 =A0 =A0 =A0netbios name =3D HIFXNXDC\r\n> =A0 =A0 =A0 =A0server string =3D HIFXNX Domain Controller, PHP Developmen=\r\nt\r\n> Server, Subversion Server, DNS Server\r\n> =A0 =A0 =A0 =A0interfaces =3D 172.16.2.0/255.255.255.255\r\n> =A0 =A0 =A0 =A0bind interfaces only =3D Yes\r\n> =A0 =A0 =A0 =A0obey pam restrictions =3D Yes\r\n> =A0 =A0 =A0 =A0passdb backend =3D tdbsam\r\n> =A0 =A0 =A0 =A0pam password change =3D Yes\r\n> =A0 =A0 =A0 =A0passwd program =3D /usr/bin/passwd %u\r\n> =A0 =A0 =A0 =A0passwd chat =3D *Enter\\snew\\s*\\spassword:* %n\\n\r\n> *Retype\\snew\\s*\\spassword:* %n\\n *password\\supdated\\ssuccessfully* .\r\n> =A0 =A0 =A0 =A0unix password sync =3D Yes\r\n> =A0 =A0 =A0 =A0syslog =3D 0\r\n> =A0 =A0 =A0 =A0log file =3D /var/log/samba/log.%m\r\n> =A0 =A0 =A0 =A0max log size =3D 1000\r\n> =A0 =A0 =A0 =A0name resolve order =3D lmhosts host wins bcast\r\n> =A0 =A0 =A0 =A0add user script =3D /usr/sbin/adduser --quiet\r\n> --disabled-password --gecos "" %u\r\n> =A0 =A0 =A0 =A0add group script =3D /usr/sbin/addgroup --force-badname %g\r\n> =A0 =A0 =A0 =A0add machine script =3D /usr/sbin/useradd -g machines -c "%=\r\nu\r\n> machine account" -d /var/lib/samba -s /bin/false %u\r\n> =A0 =A0 =A0 =A0domain logons =3D Yes\r\n> =A0 =A0 =A0 =A0os level =3D 33\r\n> =A0 =A0 =A0 =A0preferred master =3D Auto\r\n> =A0 =A0 =A0 =A0domain master =3D Yes\r\n> =A0 =A0 =A0 =A0dns proxy =3D No\r\n> =A0 =A0 =A0 =A0panic action =3D /usr/share/samba/panic-action %d\r\n> [homes]\r\n> =A0 =A0 =A0 =A0comment =3D Home Directories\r\n> =A0 =A0 =A0 =A0valid users =3D %S\r\n> =A0 =A0 =A0 =A0create mask =3D 0700\r\n> =A0 =A0 =A0 =A0directory mask =3D 0700\r\n> =A0 =A0 =A0 =A0browseable =3D No\r\n> [netlogon]\r\n> =A0 =A0 =A0 =A0comment =3D Network Logon Service\r\n> =A0 =A0 =A0 =A0path =3D /home/samba/netlogon\r\n> =A0 =A0 =A0 =A0guest ok =3D Yes\r\n> =A0 =A0 =A0 =A0share modes =3D No\r\n>\r\n> I can get the domain & domain controller resolved using DNS from the\r\n> Windows XP machine.\r\n> But when I try to join the domain from the Windows XP machine.\r\n> I get the error\r\n> "A Domain Controller for the domain hifxnx.local could not be contacted"\r\n> and the debug log file dcdiag.txt contains these details.\r\n> The following error occurred when DNS was queried for the service\r\n> location (SRV) resource record used to locate a domain controller for\r\n> domain hifxnx.local:\r\n> The error was: "DNS name does not exist."\r\n> (error code 0x0000232B RCODE_NAME_ERROR)\r\n> The query was for the SRV record for _ldap._tcp.dc._msdcs.hifxnx.local\r\n> Common causes of this error include the following:\r\n> - The DNS SRV record is not registered in DNS.\r\n> - One or more of the following zones do not include delegation to its\r\n> child zone:\r\n> hifxnx.local\r\n> local\r\n> . (the root zone)\r\n\r\nMy Domain SMB knowledge is slightly rusty but here goes...\r\n\r\n1. Your Samba server\'s ip address ends with a 0, which, AFAIK, is\r\nreserved for network addresses (unless it has some special purpose\r\nlike the the /32 netmask). What is the output of "ifconfig -a"?\r\n\r\n2. In your smb.conf:\r\n\r\n2.a The following are missing (although they may be the default\r\nsettings for these variables):\r\nsecurity =3D user\r\nlocal master =3D yes\r\n\r\n2.b I have forgotten why, but AFAIK "127.0.0.1" should be listed in\r\n"interfaces =3D".\r\n\r\n2.c What does "share modes =3D No" do?\r\n\r\n3. If you have not yet created a computer account for the Windows box,\r\nyou have to log on to the domain as root (or as a user with the right\r\nto add a machine account) the first time that you do so from a Samba\r\nclient for the "add machine script =3D" variable to do its magic.\r\n\r\n4. The "_ldap._tcp...." DNS SRV records are needed for an AD domain\r\n(IIRC there are 6 +-1). I have never set up an AD Samba PDC but your\r\nsmb.conf settings look like those of an NT4 Samba PDC so it may just\r\nbe a misleading error/failure message. Your Windows box seems to be an\r\nXP VM but just in case the netbios name is misleading, see\r\nhttp://wiki.samba.org/index.php/Windows7\r\n\r\n\r\n-- \r\nTo UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org \r\nwith a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org\r\nArchive: http://lists.debian.org/i2x6d4219cc1004291502n9c747e56ra1b0d48c7ddf2ede@mail.csmining.org\r\n\r\n\r\n', 'subject': 'Re: nslookup from Windows resolves domain and pdc correctly but still \r\n\tgets cannot contact on samba 3.2.5-4 on lenny'}