{'body': 'On Wed, Apr 28, 2010 at 7:50 AM, Siju George <sgeorge.ml@csmining.org> wrote:\n>\n> I have installed\n> ii \xa0samba \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 2:3.2.5-4lenny9 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0a\n> ii \xa0samba-common \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa02:3.2.5-4lenny9\n> On Debian Lenny and i am sharing directories to Windows Users successfully.\n>\n> I configured it as a PDC with the following configuration.\n> [global]\n> \xa0 \xa0 \xa0 \xa0workgroup = HIFXNX\n> \xa0 \xa0 \xa0 \xa0netbios name = HIFXNXDC\n> \xa0 \xa0 \xa0 \xa0server string = HIFXNX Domain Controller, PHP Development\n> Server, Subversion Server, DNS Server\n> \xa0 \xa0 \xa0 \xa0interfaces = 172.16.2.0/255.255.255.255\n> \xa0 \xa0 \xa0 \xa0bind interfaces only = Yes\n> \xa0 \xa0 \xa0 \xa0obey pam restrictions = Yes\n> \xa0 \xa0 \xa0 \xa0passdb backend = tdbsam\n> \xa0 \xa0 \xa0 \xa0pam password change = Yes\n> \xa0 \xa0 \xa0 \xa0passwd program = /usr/bin/passwd %u\n> \xa0 \xa0 \xa0 \xa0passwd chat = *Enter\\snew\\s*\\spassword:* %n\\n\n> *Retype\\snew\\s*\\spassword:* %n\\n *password\\supdated\\ssuccessfully* .\n> \xa0 \xa0 \xa0 \xa0unix password sync = Yes\n> \xa0 \xa0 \xa0 \xa0syslog = 0\n> \xa0 \xa0 \xa0 \xa0log file = /var/log/samba/log.%m\n> \xa0 \xa0 \xa0 \xa0max log size = 1000\n> \xa0 \xa0 \xa0 \xa0name resolve order = lmhosts host wins bcast\n> \xa0 \xa0 \xa0 \xa0add user script = /usr/sbin/adduser --quiet\n> --disabled-password --gecos "" %u\n> \xa0 \xa0 \xa0 \xa0add group script = /usr/sbin/addgroup --force-badname %g\n> \xa0 \xa0 \xa0 \xa0add machine script = /usr/sbin/useradd -g machines -c "%u\n> machine account" -d /var/lib/samba -s /bin/false %u\n> \xa0 \xa0 \xa0 \xa0domain logons = Yes\n> \xa0 \xa0 \xa0 \xa0os level = 33\n> \xa0 \xa0 \xa0 \xa0preferred master = Auto\n> \xa0 \xa0 \xa0 \xa0domain master = Yes\n> \xa0 \xa0 \xa0 \xa0dns proxy = No\n> \xa0 \xa0 \xa0 \xa0panic action = /usr/share/samba/panic-action %d\n> [homes]\n> \xa0 \xa0 \xa0 \xa0comment = Home Directories\n> \xa0 \xa0 \xa0 \xa0valid users = %S\n> \xa0 \xa0 \xa0 \xa0create mask = 0700\n> \xa0 \xa0 \xa0 \xa0directory mask = 0700\n> \xa0 \xa0 \xa0 \xa0browseable = No\n> [netlogon]\n> \xa0 \xa0 \xa0 \xa0comment = Network Logon Service\n> \xa0 \xa0 \xa0 \xa0path = /home/samba/netlogon\n> \xa0 \xa0 \xa0 \xa0guest ok = Yes\n> \xa0 \xa0 \xa0 \xa0share modes = No\n>\n> I can get the domain & domain controller resolved using DNS from the\n> Windows XP machine.\n> But when I try to join the domain from the Windows XP machine.\n> I get the error\n> "A Domain Controller for the domain hifxnx.local could not be contacted"\n> and the debug log file dcdiag.txt contains these details.\n> The following error occurred when DNS was queried for the service\n> location (SRV) resource record used to locate a domain controller for\n> domain hifxnx.local:\n> The error was: "DNS name does not exist."\n> (error code 0x0000232B RCODE_NAME_ERROR)\n> The query was for the SRV record for _ldap._tcp.dc._msdcs.hifxnx.local\n> Common causes of this error include the following:\n> - The DNS SRV record is not registered in DNS.\n> - One or more of the following zones do not include delegation to its\n> child zone:\n> hifxnx.local\n> local\n> . (the root zone)\n\nMy Domain SMB knowledge is slightly rusty but here goes...\n\n1. Your Samba server\'s ip address ends with a 0, which, AFAIK, is\nreserved for network addresses (unless it has some special purpose\nlike the the /32 netmask). What is the output of "ifconfig -a"?\n\n2. In your smb.conf:\n\n2.a The following are missing (although they may be the default\nsettings for these variables):\nsecurity = user\nlocal master = yes\n\n2.b I have forgotten why, but AFAIK "127.0.0.1" should be listed in\n"interfaces =".\n\n2.c What does "share modes = No" do?\n\n3. If you have not yet created a computer account for the Windows box,\nyou have to log on to the domain as root (or as a user with the right\nto add a machine account) the first time that you do so from a Samba\nclient for the "add machine script =" variable to do its magic.\n\n4. The "_ldap._tcp...." DNS SRV records are needed for an AD domain\n(IIRC there are 6 +-1). I have never set up an AD Samba PDC but your\nsmb.conf settings look like those of an NT4 Samba PDC so it may just\nbe a misleading error/failure message. Your Windows box seems to be an\nXP VM but just in case the netbios name is misleading, see\nhttp://wiki.samba.org/index.php/Windows7\n\n\n-- \nTo UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org \nwith a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org\nArchive: http://lists.debian.org/i2x6d4219cc1004291502n9c747e56ra1b0d48c7ddf2ede@mail.csmining.org\n\n\n', 'subject': 'Re: nslookup from Windows resolves domain and pdc correctly but still \n\tgets cannot contact on samba 3.2.5-4 on lenny'}