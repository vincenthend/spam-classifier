{'body': 'On Sat, 01 May 2010 19:14:52 +0200, Florian Kulzer  \r\n<florian.kulzer+debian@icfo.es> wrote:\r\n\r\n> On Sat, May 01, 2010 at 17:20:56 +0200, Alois Mahdal wrote:\r\n>> Hello,\r\n>>\r\n>> because a stupid mistake, I have interrupted apt-get during early\r\n>> stage of dist-upgrade from Lenny to Squeeze.\r\n>>\r\n>> Now I cannot get apt-get working and I don\'t know how to fix it.\r\n>>\r\n\r\n[...]\r\n\r\n>> dpkg: warning: \'ldconfig\' not found on PATH.\r\n>> dpkg: 1 expected program(s) not found on PATH.\r\n>> NB: root\'s PATH should usually contain /usr/local/sbin, /usr/sbin\r\n>> and /sbin.\r\n>> E: Sub-process /usr/bin/dpkg returned an error code (2)\r\n>\r\n> Both "locale" and "ldconfig" were shifted from libc6 to libc-bin going\r\n> from Lenny and Squeeze; my guess would be that you upgraded to the\r\n> Squeeze version of libc6, but you did not yet complete the installation\r\n> of libc-bin, so now these important commands (and others) are missing on\r\n> your system. (The libc-bin package does not exist for Lenny.)\r\n>\r\n> If dpkg still works then you can try to download libc-bin for your\r\n> architecture from http://packages.debian.org/squeeze/libc-bin and\r\n> install the .deb with "dpkg -i ...", see here:\r\n>\r\n> http://www.debian.org/doc/manuals/reference/ch02.en.html#_rescue_with_the_dpkg_command\r\n>\r\n\r\nThanks, Florian.\r\n\r\nUnfortunately, dpkg was too broken, so i had to use Ubuntu livecd (because  \r\nI could not find dpkg at Debian installer CD / rescue mode) to boot and do  \r\nfollowing:\r\n\r\n  1. mount -t ext2 /dev/sdaX /media/root\r\n  # ...and all relevant partitions (/usr, /var, ...) respectively\r\n  2. mount --bind /dev /media/root/dev\r\n  # Since dpkg was complaining about missing Debian-exim group, I had to  \r\nget rid of statoverride:\r\n  3. chroot /media/root\r\n  4. dpkg-statoverride --remove /etc/exim4/passwd.client\r\n  # Later I must not forget to restore /var/lib/dpkg/statoverride from  \r\nstatoverride-old\r\n  5. exit && cd\r\n  6. wget  \r\nhttp://ftp.cz.debian.org/debian/pool/main/e/eglibc/libc-bin_2.10.2-6_amd64.deb\r\n  7. wget  \r\nhttp://ftp.cz.debian.org/debian/pool/main/e/eglibc/libc6_2.10.2-6_amd64.deb\r\n  8. dpkg --root=/media/root -i libc-bin_2.10.2-6_amd64.deb\r\n  9. dpkg --root=/media/root -i libc6_2.10.2-6_amd64.deb\r\n10. reboot\r\n\r\nAfter reboot and restoration of statoverride, I can continue with apt-get  \r\nupgrade and apt-get dist-upgrade; dpkg seems to work.\r\n\r\nThanks again to you all!\r\n\r\n\r\n-- \r\nUsing Opera\'s revolutionary e-mail client: http://www.opera.com/mail/\r\n\r\n\r\n-- \r\nTo UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org \r\nwith a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org\r\nArchive: http://lists.debian.org/op.vb3fsevk53tp3f@hugo.lennycz-depot\r\n\r\n\r\n', 'subject': 'Re: Broken dependencies'}