{'body': 'On Sat, 01 May 2010 19:14:52 +0200, Florian Kulzer  \n<florian.kulzer+debian@icfo.es> wrote:\n\n> On Sat, May 01, 2010 at 17:20:56 +0200, Alois Mahdal wrote:\n>> Hello,\n>>\n>> because a stupid mistake, I have interrupted apt-get during early\n>> stage of dist-upgrade from Lenny to Squeeze.\n>>\n>> Now I cannot get apt-get working and I don\'t know how to fix it.\n>>\n\n[...]\n\n>> dpkg: warning: \'ldconfig\' not found on PATH.\n>> dpkg: 1 expected program(s) not found on PATH.\n>> NB: root\'s PATH should usually contain /usr/local/sbin, /usr/sbin\n>> and /sbin.\n>> E: Sub-process /usr/bin/dpkg returned an error code (2)\n>\n> Both "locale" and "ldconfig" were shifted from libc6 to libc-bin going\n> from Lenny and Squeeze; my guess would be that you upgraded to the\n> Squeeze version of libc6, but you did not yet complete the installation\n> of libc-bin, so now these important commands (and others) are missing on\n> your system. (The libc-bin package does not exist for Lenny.)\n>\n> If dpkg still works then you can try to download libc-bin for your\n> architecture from http://packages.debian.org/squeeze/libc-bin and\n> install the .deb with "dpkg -i ...", see here:\n>\n> http://www.debian.org/doc/manuals/reference/ch02.en.html#_rescue_with_the_dpkg_command\n>\n\nThanks, Florian.\n\nUnfortunately, dpkg was too broken, so i had to use Ubuntu livecd (because  \nI could not find dpkg at Debian installer CD / rescue mode) to boot and do  \nfollowing:\n\n  1. mount -t ext2 /dev/sdaX /media/root\n  # ...and all relevant partitions (/usr, /var, ...) respectively\n  2. mount --bind /dev /media/root/dev\n  # Since dpkg was complaining about missing Debian-exim group, I had to  \nget rid of statoverride:\n  3. chroot /media/root\n  4. dpkg-statoverride --remove /etc/exim4/passwd.client\n  # Later I must not forget to restore /var/lib/dpkg/statoverride from  \nstatoverride-old\n  5. exit && cd\n  6. wget  \nhttp://ftp.cz.debian.org/debian/pool/main/e/eglibc/libc-bin_2.10.2-6_amd64.deb\n  7. wget  \nhttp://ftp.cz.debian.org/debian/pool/main/e/eglibc/libc6_2.10.2-6_amd64.deb\n  8. dpkg --root=/media/root -i libc-bin_2.10.2-6_amd64.deb\n  9. dpkg --root=/media/root -i libc6_2.10.2-6_amd64.deb\n10. reboot\n\nAfter reboot and restoration of statoverride, I can continue with apt-get  \nupgrade and apt-get dist-upgrade; dpkg seems to work.\n\nThanks again to you all!\n\n\n-- \nUsing Opera\'s revolutionary e-mail client: http://www.opera.com/mail/\n\n\n-- \nTo UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org \nwith a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org\nArchive: http://lists.debian.org/op.vb3fsevk53tp3f@hugo.lennycz-depot\n\n\n', 'subject': 'Re: Broken dependencies'}