{'body': 'Ron Johnson put forth on 4/14/2010 10:14 PM:\r\n\r\n> Nothing I\'ve seen in dmesg has ever led me to think that the r8169\r\n> driver in my Sid linux-source-2.6.31 kernel (yes, it\'s old; .32 and 33\r\n> fail to build) loads a blob.\r\n\r\nAlmost all NICs load firmware blobs.  It\'s in dmesg somewhere.  When the\r\nfirmware doesn\'t load you get something like this in dmesg:\r\n\r\neth1: RTL8168d/8111d at 0xffffc90000c4e000,xx:xx:xx:xx:xx:xx, XID 083000c0\r\nIRQ 32\r\neth1: unable to apply firmware patch\r\n\r\nThat\'s a paste from one of the OPs here who was bitten by the 2.6.32-trunk\r\nupgrade which IIRC is the one that ripped out the RTL firmware blob.\r\n\r\nI can\'t find via Google a dmesg snippet of a successful RTL firmware load.\r\nHere\'s what it looks like for Intel 8255X using the e100 driver, with the\r\nfirmware blobs all compiled into the kernel:\r\n\r\ne100 0000:00:0d.0: firmware: using built-in firmware e100/d101m_ucode.bin\r\n\r\n"built-in" signifies that the firmware blob has been included in the kernel\r\nat compile time.  I do this to avoid issues such as this RTL problem.  It\r\nonly adds a couple hundred K to the kernel image.  And I use the vanilla\r\nkernel.org sources to avoid any Debian "non-free" issues.\r\n\r\nJust about every NIC on the planet uses a firmware blob.  There are, IIRC, 3\r\nways to load the device firmware into the Linux kernel.  This applies to all\r\ndevices that require soft firmware, not just NICs:\r\n\r\n1.  Compile all device firmware blobs into the kernel\r\n2.  Compile the individual blob into the driver, use initrd\r\n3.  Put firmware file in root filesystem, tell kernel the path\r\n\r\n#3 won\'t work with drivers that are needed during the boot process such as\r\nblock device drivers.  Those require method 1 or 2.  NICs should be able to\r\nuse 1-3.\r\n\r\nThere are 3 different dmesg statements and 3 different errors depending on\r\nwhich method 1-3 above that you\'re using.\r\n\r\n>> At least a couple of people on this list went out and bought\r\n>> non-RealTek PCI\r\n>> NICs to fix the problem instead of reverting to the older kernel.\r\n> \r\n> I sort of remember that.\r\n\r\nYeah, I just pulled the mails.  One upgraded to 2.6.32-trunk on his\r\nfirewall, bricking it until he disabled the onboard RTL and installed an\r\nIntel e100 IIRC.  They thought it was a udev issue til I noticed the\r\nfirmware load failure message referenced up above in this email.  The other\r\nhad an RTL wireless that failed for the same reason.  I can\'t recall how\r\nthey fixed that one.  IIRC the OP didn\'t swap hardware to achieve the fix,\r\nso they did something with the kernel/driver/firmware.\r\n\r\n> I\'m not surprised.  Since I\'m only connected to a small 100Mbps LAN\r\n> which then connects to a 12Mbps cable modem, it doesn\'t really affect me.\r\n\r\nDo some FTP or SCP tests back and forth to another LAN machine and see what\r\ntransfers rates you get out of that RTL chip.  I bet you get 1/3rd wire\r\nspeed at best, about 30MB/s, if even that.  The machines themselves need to\r\nbe modern to saturate the link--no slow CPUs or disks.  Any ~2GHz CPU with\r\n512MB RAM and a decent 7.2K RPM SATA disk should be able to push/pull 50MB/s\r\nacross the wire.  For that matter, eliminate the disk by creating a 200MB\r\nRAM disk on each machine.  Create a test file with dd and FTP/SCP it back\r\nand forth between the RAM disks.  If your RTL chip can peak the wire it\'ll\r\nbe a 2-3 second transfer if your network chips and Linux TCP stacks are up\r\nto the task.\r\n\r\n> Maybe if I ever get .32 or .33 I\'ll squeal in anger.  Until then...\r\n\r\nIt\'s looking like the RTL firmware blob issue may have been limited to the\r\ntrunk kernel.  You may get lucky.  Then again, if you roll your own and put\r\nthe firmware blobs in the kernel itself as I do, you shouldn\'t have a\r\nproblem.  That is, if the Debian kernel source doesn\'t have the blob ripped\r\nout for being "non-free".\r\n\r\nYou mentioned you had problems building 2.6.32 and .33 kernel source.  Do\r\nyou use the Debian kernel source or kernel.org source?  I\'ve been using the\r\nkernel.org source for quite some time and have never had any real problems\r\nwith it (knocks on wood).  I had a build problem with .33 a while back but\r\nthat turned out to be due to a slight bit too much overclock on my machine\r\nin this warmer weather.  ;)\r\n\r\n-- \r\nStan\r\n\r\n\r\n-- \r\nTo UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org \r\nwith a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org\r\nArchive: http://lists.debian.org/4BC6960E.7020202@hardwarefreak.com\r\n\r\n\r\n', 'subject': 'Re: Realtek ethernet (was Re: recent mobo recommendation)'}