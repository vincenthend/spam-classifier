{'body': '\nChris said:\n> \n> I can tell you what the \'clear\' and \'del\' arguments mean:\n> \n> Mh_SequenceUpdate lists/l-k clear cur {} public\n> \tThis means to clear the \'cur\' sequence for lists/l-k\n> \n> Mh_SequenceUpdate lists/l-k del unseen 5400 public\n> \tThis means to delete message 5400 from the \'unseen\' sequence for lists/l-k\n> \n> Can you explain more what you were actually doing as this occurred?  This \n> doesn\'t appear to be background processing.  Is there significance to message \n> 5400?  Is it the one that isn\'t displaying?\n> \n> Chris\n\nAfter sending the report I started fiddling with the Ftoc_RescanLine \nstuff and I havn\'t seen it since. I can\'t really tell if it was my \nhacking that removed it, or if it was some transitional magic \nhappening since this was the first invocation of that version of \nexmh. I\'ve backed out my stuff now, and\'ll let you know if it happens \nagain.\n\n\nOn another thing with the Ftoc_RescanLine stuff. This routine is \ncalled at times still unclar to me. An inspection of the routine \nsuggests that it is used in the transition of a message to/form \n"current" state to re-paint the ftoc line. However, checking the \nmsg.tcl code (MSgChange) we find:\n\n    if {$msgid != {}} {\n        # Allow null msgid from Msg_ShowWhat, which supplies line \ninstead\n        if {$msgid < 0}  return\n    } else {\n        # line null too, try using first in folder\n        if {[string length $line] == 0} { set line 1 }\n        set msgid [Ftoc_MsgNumber [Ftoc_FindMsg $msgid $line]]\n    }\n    Ftoc_ClearCurrent\n    Mh_SetCur $exmh(folder) $msgid\n    Ftoc_ShowSequences $exmh(folder)\n\nThe Ftoc_ClearCurrent calls Ftoc_RescanLIne to clear the \'+\' sign \n_before_ the on-disk transition is made. I hacked this stuff and more \nor less changed the order. It works, but fails on some folder changes.\n\nMy feeling of this is that we really do not want to have a \nFtoc_ClearCurrent, but rather just a RescanLine and the caller had \nbetter know the line or msgid. That routine shoud just put in the \'+\' \nif the line/msg in question happened to be the cur msg. Thoughts?\n\n\n/Anders\n\n\n\n\n\n\n\n\n\n\n_______________________________________________\nExmh-workers mailing list\nExmh-workers@redhat.com\nhttps://listman.redhat.com/mailman/listinfo/exmh-workers\n\n\n', 'subject': 'Re: Another bug'}