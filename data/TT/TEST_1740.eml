{'body': 'On Tue, Jul 30, 2002 at 03:47:40PM +0100 or so it is rumoured hereabouts, \nNiall O Broin thought:\n> I\'m installing warm standby disks on a number of boxes. These disks will be\n> the same size (sometimes bigger) than the main disk. The idea is that every\n> night I\'ll rsync the partitions on the main disk to the standby disk so that\n> in the case of disaster, the first port of call, before the tapes, is the\n> standby disk. (We did consider running Linux md RAID on the disks but RAID\n> gives you no protection against slips of the finger)\n> \n> So, in the event of finger slips we can mount the relevant partition and\n> retrieve the banjaxed file. In the case of a disk crash, the plan is that\n> we\'ll put the standby disk in place of the main disk and the workstation\n> will be back up ASAP. Then we can deal with replacing the disk without the\n> pressure of a broken box on our back.\n> \n> However, I\'m stumped as to how to install LILO on the backup disk. Let\'s say\n> the master disk is /dev/hda and the backup disk is /dev/hdb. lilo.conf\n> currently looks like this:\n> \n> boot    = /dev/hda\n> change-rules\n> reset\n> read-only\n> menu-scheme = Wg:kw:Wg:Wg\n> lba32\n> prompt\n> timeout = 80\n> message = /boot/message\n> \n>   image  = /boot/vmlinuz\n>   label  = linux\n>   root   = /dev/hda3\n>   vga    = 791\n>   initrd = /boot/initrd\n> \n> \n> \n> There are a couple more boot stanzas, but they\'re not germane. As you can\n> see, / is on /dev/hda3 and /boot is on /dev/hda1. So if for instance I had\n> booted from a CD and wanted to re-install LILO on this disk I\'d do something\n> like\n> \n> mount /dev/hda3 /mnt\n> mount /dev/hda1 /mnt/boot\n> lilo -r /mnt\n> \n> which is OK because I\'m installing lilo on /dev/hda and I want it to boot\n> from /dev/hda so it\'ll plug in all the right numbers.\n> \n> However, in the case of the standby disk, I\'ll have to do something like\n> \n> mount /dev/hdb3 /mnt\n> mount /dev/hdb1 /mnt/boot\n> lilo -r /mnt\n> \n> But I\'m obviously going to have to do something different here because I\n> want to install onto /dev/hdb in such a way that the disk will boot when it\n> becomes /dev/hda after a disaster (like the one I had this morning :-( -\n> shutting the stable door was on the to-do list, but the bloody horse decided\n> to do a bunk early). The machine already has its spare disk - just hadn\'t\n> yet been used :-(\n> \n> I thought perhaps I should just do   lilo -b /dev/hdb -r /mnt  but I think\n> that -b is analogous to the boot keyword in lilo.conf. Or will this just\n> work automagically ?  i.e. boot = /dev/hda tells lilo what numbers to poke\n> where, and it figures out where the disk is from the -r ?\n\n from the Hard Disk Upgrade Mini HOWTO :\n\n8. Prepare LILO to boot the new disk\n\n   (Thanks to Rick Masters for helping with this.)\n\n   We\'re  assuming  that LILO is installed on the hard disk\'s Master Boot\n   Record (MBR); this seems to be the most common configuration. You want\n   to  install  LILO  on  what\'s  presently the second hard disk but will\n   become the first hard disk.\n\n   Edit the file /new-disk/etc/lilo.conf as follows:\n\n        disk=/dev/hdb bios=0x80       # Tell LILO to treat the second\n                                      # disk as if it were the first\n                                      # disk (BIOS ID 0x80).\n        boot=/dev/hdb                 # Install LILO on second hard\n                                      # disk.\n        map=/new-disk/boot/map        # Location of "map file".\n        install=/new-disk/boot/boot.b # File to copy to hard disk\'s\n                                      # boot sector.\n        prompt                        # Have LILO show "LILO boot:"\n                                      # prompt.\n        timeout=50                    # Boot default system after 5\n                                      # seconds. (Value is in tenths of\n                                      # seconds.)\n        image=/new-disk/boot/vmlinuz  # Location of Linux kernel. The\n                                      # actual name may include a version\n                                      # number, for example\n                                      # "vmlinuz-2.0.35".\n            label=linux               # Label for Linux system.\n            root=/dev/hda1            # Location of root partition on\n                                      # new hard disk. Modify this as\n                                      # appropriate for your system.\n                                      # Note that you must use the name\n                                      # of the future location, once the\n                                      # old disk has been removed.\n            read-only                 # Mount partition read-only at\n                                      # first, to run fsck.\n\nConor\n\nPS.  Um, what does \n\n> menu-scheme = Wg:kw:Wg:Wg\n\ndo?\n-- \nConor Daly <conor.daly@oceanfree.net>\n\nDomestic Sysadmin :-)\n---------------------\nFaenor.cod.ie\n  6:04pm  up 69 days,  3:22,  0 users,  load average: 0.00, 0.00, 0.00\nHobbiton.cod.ie\n  5:50pm  up 12 days, 27 min,  1 user,  load average: 0.00, 0.00, 0.00\n\n-- \nIrish Linux Users\' Group: ilug@linux.ie\nhttp://www.linux.ie/mailman/listinfo/ilug for (un)subscription information.\nList maintainer: listmaster@linux.ie\n\n\n', 'subject': 'Re: [ILUG] Installing lilo on another disk.'}