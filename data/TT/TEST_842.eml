{'body': 'http://www.hughes-family.org/bugzilla/show_bug.cgi?id=1046\n\n\n\n\n\n------- Additional Comments From spamassassin-contrib@msquadrat.de  2002-10-03 13:57 -------\n> I\'ve thought about this and PM_FILTER needs to die. I\'ve now tried  \n> multiple ways to make it just transparently work on 5.00503 and failed.  \n> If anyone has any bright ideas please jump in. \n>  \n> You see anyone upgrading from the CPAN shell will get a failure on the line: \n>  \n>    use ExtUtils::MakeMaker 5.45; \n \nQuite some modules from CPAN do have a line like this nowadays (I think or \nread so somewhere, respectively). And the Perl error message is very clear: \n"ExtUtils::MakeMaker version 5.45 required--this is only version 5.4302 at \nMakefile.PL line 2." \n \n> Because it never gets chance to reach a "WriteMakefile" line with a  \n> PREREQ_PM => { ExtUtils::MakeMaker => 5.45 } option. So the CPAN shell  \n> can\'t automatically upgrade this module. I cannot think of any way  \n> around this. \n \nI could think of a solution: We could remove the "use" line and add the \nversion to PREREQ_PM. After WriteMakefile() we could add the lines \n  require ExtUtils::MakeMaker; \n  ExtUtils::MakeMaker->VERSION(5.45); \nto do per hand what \'use ExtUtils::MakeMaker 5.45\' does automagically; `perl \nMakefile.PL` will die with a "Uncaught exception from user code: \nExtUtils::MakeMaker version 5.45 required--this is only version 5.4302 at \nMakefile.PL line 103." there but we\'ve got a Makefile. But I don\'t know if \nCPAN will run the make anyway... \n \n> To add insult to injury, the PM_FILTER part gets run during pm_to_blib,  \n> which would be fine, except ExtUtils::MakeMaker doesn\'t let you write a  \n> MY::pm_to_blib - it\'s non-overridable! So even though we could  \n> potentially copy the 5.45 ExtUtils::Install::pm_to_blib code somewhere  \n> into the spamassassin codebase (I tried that first), we can\'t cause the  \n> Makefile to call our code :-( \n \nWe could call the preprocessor on install time. That\'s not a very clean \napproach but could work. \n \nWe can also overwrite pm_to_blib in the Makefile directly per postamble. We \nalready have a useless line "pm_to_blib: spamassassin doc/.made" there. Adding \nsome commands in this section gives some make warnings ("Makefile:933: \nwarning: overriding commands for target `pm_to_blib\' Makefile:877: warning: \nignoring old commands for target `pm_to_blib\'") but does work. Not a very good \nsolution either. \n \n> So I\'m *strongly* against the current use of ExtUtils::MakeMaker 5.45  \n> usage (if this were an Apache project this would be my veto vote), and  \n> really hope we can find another way. \n \nThe "use MakeMaker::..." error message is IMHO quite clear, so I think it\'s ok \nto require the user to do a manual update of ExtUtils::MakeMaker before the SA \ninstallation. But that\'s just my opinion ;-) \n \nI\'ll ask on makemaker@perl.org for the best solution. They should know. \n\n\n\n------- You are receiving this mail because: -------\nYou are on the CC list for the bug, or are watching someone who is.\n\n\n-------------------------------------------------------\nThis sf.net email is sponsored by:ThinkGeek\nWelcome to geek heaven.\nhttp://thinkgeek.com/sf\n_______________________________________________\nSpamassassin-devel mailing list\nSpamassassin-devel@lists.sourceforge.net\nhttps://lists.sourceforge.net/lists/listinfo/spamassassin-devel\n\n\n', 'subject': "[SAdev] [Bug 1046] Errors from 'perl Makefile.PL'"}